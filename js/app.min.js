"use strict";!function(){var e=void 0,t=void 0,n=45e3,o=document.querySelector(".chat"),a=document.querySelector(".content"),s=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.timeout=5e3,n.onload=function(){if(n.status>=200&&n.status<400)try{var e=JSON.parse(n.responseText);t(e)}catch(o){t(!1)}else t(!1)},n.ontimeout=function(){t(!1)},n.onerror=function(){t(!1)},n.send()},i=function(e){var t=arguments.length<=1||void 0===arguments[1]?"user":arguments[1],n=document.createElement("section"),a=function(e,t){setTimeout(function(){e.classList.add("show")},150*t?150*t:10)},s=void 0,i=function(){o.scrollTop+=n.offsetHeight/20};if(n.classList.add("message"),n.classList.add(t),n.innerHTML="<p>"+e+"</p>",o.appendChild(n),s=window.setInterval(i,10),setTimeout(function(){window.clearInterval(s)},300),setTimeout(function(){n.classList.add("show")},10),"user"===t){for(var r=o.querySelectorAll("button:not(:disabled)"),c=0;c<r.length;c+=1)a(r[c],c);n.classList.add("active")}},r=function(e){return e[Math.floor(Math.random()*e.length)]},c=function(){var e=["Yeah, go ahead! &#x1F680;","Sure! &#x1F44D;","Why not! &#x1F44C;"];i('<button class="choice style">'+r(e)+"</button>")},u=function(){var t=document.querySelector(".active"),n=["Did you fall asleep? &#x1F634;","Coffee break? &#x2615;","Still there?","&#x2744; &#x1F331; &#x1F31E; &#x1F342;"];t&&t.parentNode.removeChild(t),i(r(n),"bot"),setTimeout(function(){var t=['Undrar du något kan du ringa <a href="tel:0852484000">08-524 840 00</a>, eller komma in till oss i KIB-labb mellan 11-16 på vardagar. &#x1F46B;','Kom in till oss i KIB-labb mellan 11-16 på vardagar om du behöver mer hjälp eller ring <a href="tel:0852484000">08-524 840 00</a>. &#x1F4F2;',"Vill du prata referenser med en riktig person? &#x1F4AC; Kom in till oss i KIB-labb mellan 11-16 på vardagar."];i(r(t),"bot"),setTimeout(function(){var t=["Jag vill veta mer om hur jag refererar &#x1F61E;","Vad är referenser nu igen? &#x1F631;","Kan jag läsa mer om referenser någonstans? &#x1F680;"],n=["Låt mig välja referensstil igen &#x1F4A1;","Jag vill sätta igång! &#x1F525;","Ok, kör &#x1F697;"],o=["Visa kategorierna igen tack &#x2705;","Ok, kör igen! &#x1F697;","Jag vill välja källa &#x1F44D;"];i(e?'<button class="choice newmenu showinfo">'+r(t)+'</button><br /><button class="choice newmenu showmenu">'+r(o)+"</button>":'<button class="choice newmenu showinfo">'+r(t)+'</button><br /><button class="choice newmenu showstart">'+r(n)+"</button>")},300)},500)},l=function(e){var o=["Hi, welcome to Redvolume Records! &#x1F603; This is not the most active label at the moment. Would you like to continue anyway? &#x1F37B;","Hello! &#x1F44B; Welcome to Redvolume Records! We're not very active at the moment, would you still like to know more?"],a=["Hmm, try again &#x1F635;","Typical. If it's not your connection, the fault could be here &#x1F6A7; Please try again.","&#x1F44E; Try again or come back later..."];t=window.setInterval(function(){window.clearInterval(t),u()},n),e?i(r(a),"bot"):i(r(o),"bot"),setTimeout(function(){c()},300)},m=function(e){e.parentNode.parentNode.classList.add("selected"),e.parentNode.parentNode.classList.remove("active"),e.parentNode.innerHTML=e.textContent},d=function(a){var s="",c=o.querySelector("button.newmenu"),l=["Here's what I can tell you about... &#x1F3A4;","Ok, check this out! &#x1F447;","Anything else you're interested in? &#x1F64F;"],d=["What would you like to know more about? &#x1F4BF; &#x1F3B5; &#x1F3A7;","Can I interest you in any of this? &#x1F4AF;","Select something of the following... &#x1F447;"];c&&m(c),setTimeout(function(){a?i(r(l),"bot"):i(r(d),"bot"),e.menu.forEach(function(e,t){s+='<button class="choice menu" data-submenu="'+t+'">'+e.title+"</button>"}),setTimeout(function(){i(s)},500)},500),t=window.setInterval(function(){window.clearInterval(t),u()},n)},h=function(){var n=["Ok, hold on... &#x1F4AA;","One moment... &#x1F440;","Just a second... &#x1F60E;"];i(r(n),"bot"),s("data/data.json",function(n){if(n){var o="";o+='<span class="close">&times;</span>',e=n,e.examples.forEach(function(e){o+='<article id="'+e.id+'">\n                         <h3>'+e.title+"</h3>\n                         "+e.body+"\n                       </article>"}),a.innerHTML=o,d()}else{var s=["&#x1F622; Oops, something went wrong...","Grrr... &#x1F621;","Something's not working at the moment &#x1F62B;"];window.clearInterval(t),i(r(s),"bot"),setTimeout(function(){l(!0)},300)}})},f=function(t){var n="",o=e.menu[t.getAttribute("data-submenu")],a=["&#x1F44D; Here's what I have on that...","See anything interesting? &#x1F648;","Any of this cool?"],s=["I wanna read about something other than "+o.title.toLowerCase()+" &#x1F61C;","Show me the menu again &#x1F60B;",o.title+" was interesting, but show me something else... &#x1F612;"];i(r(a),"bot"),o.submenu.forEach(function(e){n+='<button class="choice submenu" data-example="'+o.id+"-"+e.id+'">'+e.title+"</button>"}),n+='<br /><button class="choice submenu newmenu">'+r(s)+"</button>",setTimeout(function(){i(n)},500)},b=function(e){e.classList.contains("newmenu")?d(!0):(document.getElementById(e.getAttribute("data-example")).classList.add("show"),a.classList.add("show"))},w=function(){a.classList.remove("show"),setTimeout(function(){var e=document.querySelector(".content article.show");e&&e.classList.remove("show")},300)};document.addEventListener("click",function(n){if(n.target.classList.contains("choice")&&(window.clearInterval(t),n.target.classList.contains("submenu")||m(n.target),n.target.classList.contains("style")&&h(n.target.textContent.toLowerCase()),n.target.classList.contains("menu")&&f(n.target),n.target.classList.contains("submenu")&&b(n.target),n.target.classList.contains("showstart")&&c(),n.target.classList.contains("showmenu")&&d(!0),n.target.classList.contains("showinfo"))){var o=["Här kan du läsa mer om hur du refererar","På vår webbplats kan du läsa mer om referenser","Ok, kolla den här länken:"];i(r(o)+' <a target="_new" href="https://kib.ki.se/skriva-referera/skriva-referenser">https://kib.ki.se/skriva-referera/skriva-referenser</a>',"bot"),setTimeout(function(){var t=["OK &#x1F60E;","Hur kommer jag tillbaka? &#x1F312;","Ok, jag är redo! &#x1F44C;"];i(e?'<button class="choice newmenu showmenu">'+r(t)+"</button>":'<button class="choice newmenu showstart">'+r(t)+"</button>")},300)}n.target.classList.contains("close")&&w()}),document.addEventListener("keydown",function(e){27===e.keyCode&&w()}),setTimeout(function(){l()},500)}();